<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <script src="javascript_samples/tides/tides.js"></script>
  <script src="javascript_samples/shared/vector.js"></script>
  <link rel="stylesheet" type="text/css" href="./styles/index.css"/>
  <link rel="stylesheet" type="text/css" href="./styles/article.css"/>
</head>

<body class="article">
  <div>
    <h2 class="article_caption">Example 3: Illustration of Tidal Forces</h2>
    <p>
    This is the demonstration page of the tidal simulation javascript applet. For more details about 
    the please turn to the <a href="http://articles.beltoforion.de/article.php?a=tides_explained" target="_blank">original tidal simulation article.</a>
    </p>
    <table class="noborder">
      <tr>
        <td  class="noborder">
          <canvas id="cvTides2" width="800" height="800"></canvas>
        </td>

        <td class="noborder">	
          <form> 
            <h2>Animation Settings</h2> 

            <fieldset>
                <b>Run / Stop</b><br/>
                <button type="button" id="btnRun"  onClick="OnClickRunStop()">Run</button>
            </fieldset>

            <fieldset> 
              <b>Look at</b> 
              <select id="cbViewPoint" name="viewpoint" onChange="OnChangeViewPoint();">
	        <option value="Earth">Earth</option>
                <option value="CenterOfMass">Center of Mass</option>
              </select>
            </fieldset>

            <fieldset>  
              <b>Render Features</b><br/>
              <input type="checkbox"  name="show orbits" value="true" id="cbShowOrbits"        onChange="OnShowOrbits();"/> 
              Show Orbits<br/>
              <input type="checkbox"  name="show orbits" value="true" id="cbShowSurfacePoints" onChange="OnShowSurfacePoints();"/> 
              Show Sample Points (Centrifugal Force)<br/>
            </fieldset>

            <fieldset>  
              <b>Solar System</b><br/>
              <input type="checkbox"  name="show orbits" value="true" id="cbShowMoon"   onChange="OnShowMoon();"/> 
              Show Moon<br/>
              <input type="checkbox"  name="show orbits" value="true" id="cbShowSun"    onChange="OnShowSun();"/> 
              Show Sun<br/>
            </fieldset>

            <fieldset>  
	      <b>Force display</b><br/>
              <input type="checkbox"  name="force" value="true" id="cbShowTidalAcc"      onChange="OnShowTidalAcc()"/>
              Show Tidal Acceleration (Moon)<br/>
              <input type="checkbox"  name="force" value="true" id="cbShowTidalAccSun"   onChange="OnShowTidalAccSun()"/>
              Show Tidal Acceleration (Sun)<br/>
              <input type="checkbox"  name="force" value="true" id="cbShowOcean"         onChange="OnShowOcean()"/>
              Show Ocean<br/>
              <input type="checkbox"  name="force" value="true" id="cbShowGravAcc"       onChange="OnShowGravAcc()"/>
              Show Gravitational Acceleration (From Moon)<br/>
              <input type="checkbox"  name="force" value="true" id="cbShowCentAcc"       onChange="OnShowCentAcc()"/>
              Show Centrifugal Acceleration<br/>
              <input type="checkbox"  name="force" value="true" id="cbScaleForceToModel" onChange="OnScaleForceToModel()"/>
              Match Vector Directions to Model Scale<br/>
            </fieldset>
          </form>
        </td>
      </tr>
  </table>
</div>
	<script>
                var tidalModel = tidalSimulation({ cvid               : 'cvTides2',
                                                   path               : './javascript_samples/tides',	
                                                   lookAtTarget       : 'CenterOfMass',
                                                   autoMove           : true,
                                                   setup              : 1,
	                                           isRunning          : true,
                                                   showSun            : true,
                                                   scaleForceToModel  : false,
                                                   showMoon           : true,
                                                   showMoonOrbit      : true,
                                                   showEarthOrbit     : true,
                                                   showSurfacePoints  : false,
                                                   showGravAcc        : false,
                                                   showCentAcc        : false,
                                                   showTidalAcc       : true,
                                                   showTidalAccSun    : false,
		                                   showAccSum         : false });

		// Set up formular controls
		document.getElementById("cbViewPoint").value            = tidalModel.config.lookAtTarget;
		document.getElementById("cbShowOrbits").checked         = tidalModel.config.showEarthOrbit || model2.config.showMoonOrbit;
		document.getElementById("cbShowSurfacePoints").checked  = tidalModel.config.showSurfacePoints;
		document.getElementById("cbShowTidalAcc").checked       = tidalModel.config.showTidalAcc;
		document.getElementById("cbShowTidalAccSun").checked    = tidalModel.config.showTidalAccSun;
		document.getElementById("cbShowOcean").checked          = tidalModel.config.showAccSum;
		document.getElementById("cbShowGravAcc").checked        = tidalModel.config.showGravAcc;
		document.getElementById("cbShowCentAcc").checked        = tidalModel.config.showCentAcc;
		document.getElementById("cbShowMoon").checked           = tidalModel.config.showMoon;
		document.getElementById("cbShowSun").checked            = tidalModel.config.showSun;
		document.getElementById("cbScaleForceToModel").checked  = tidalModel.config.scaleForceToModel;
                document.getElementById("btnRun").innerHTML  = "Stop";

		function OnChangeViewPoint()
		{
			tidalModel.config.lookAtTarget = document.getElementById("cbViewPoint").value;
		}

		function OnShowOrbits()
		{
			var check = document.getElementById("cbShowOrbits").checked;
                        tidalModel.config.showEarthOrbit = check;
                        tidalModel.config.showMoonOrbit = check;
		}

		function OnShowSurfacePoints()
		{
                        tidalModel.config.showSurfacePoints = document.getElementById("cbShowSurfacePoints").checked;
		}

		function OnShowTidalAcc()
		{
                        tidalModel.config.showTidalAcc = document.getElementById("cbShowTidalAcc").checked;
		}

		function OnShowTidalAccSun()
		{
                        tidalModel.config.showTidalAccSun = document.getElementById("cbShowTidalAccSun").checked;
		}

		function OnShowOcean()
		{
                        tidalModel.config.showAccSum = document.getElementById("cbShowOcean").checked;
		}

		function OnShowGravAcc()
		{
                        tidalModel.config.showGravAcc = document.getElementById("cbShowGravAcc").checked;
		}

		function OnShowCentAcc()
		{
                        tidalModel.config.showCentAcc = document.getElementById("cbShowCentAcc").checked;
		}

		function OnShowSun()
		{
                        tidalModel.config.showSun = document.getElementById("cbShowSun").checked;
		}

		function OnShowMoon()
		{
                        tidalModel.config.showMoon = document.getElementById("cbShowMoon").checked;
		}

		function OnScaleForceToModel()
		{
                        tidalModel.setScaleForceToModel(document.getElementById("cbScaleForceToModel").checked);
		}

		function OnClickRunStop()
		{
                        if (tidalModel.ts==0) {
                                tidalModel.ts = 86400/10
                                document.getElementById("btnRun").innerHTML  = "Stop";
        
                        } else {
                                tidalModel.ts = 0
                                document.getElementById("btnRun").innerHTML  = "Run";
                        }
		}
	</script>
</body>
</html>
